# ツール名: promp (読み方: プロンプ)

## このツールは何？ (目的)
* LLMのWeb AIをコーディングエージェントとして使うための便利機能を提供する

---

## コマンド仕様

### 基本コマンド: 
`promp [sub_command] [arguments] --options`

---

### 初期化
カレントフォルダにprompで使用するファイルやフォルダを追加する

* **コマンド:** `promp init`
* **引数 (Arguments):**
    * なし
* **オプション (Options):**
    * なし
* **実行例:**
    ```sh
    # カレントフォルダでprompを使えるようにする
    promp init
    ```
* **仕様:**

    カレントフォルダに以下のフォルダ／ファイルを配置する
    
    (D)-> フォルダ (F)-> ファイル
    ```
    .promp-template(D)
    L default.txt(F)
    L spec.txt(F)
    .gitignore(F)
    PROMP-SPEC.md(F)
    ```

    .gitignoreの中身は以下。既存の.gitignoreがあれば、以下の行を加える
    ```
    # for promp
    .promp-out
    ```

    default.txtとspec.txtの内容は「ファイルの内容」
    
    PROMP-SPEC.mdの中身は.promp-template/spec.txtと同じ

    すでにカレントフォルダに一つ以上のファイルやフォルダが存在する場合は、どのような作用があるか説明して、ユーザーから許可を取るようにする

---

### 出力
プロンプトを出力する

* **コマンド:** `promp out "既存ファイルパス"`
* **引数 (Arguments):**
    * `"既存ファイルパス"`: プロンプトに加えたいファイルパス。複数可、ワイルドカード可。
* **オプション (Options):**
    * `-t, --template <テンプレート名>`: (任意) プロンプト作成時のテンプレートを指定する
* **実行例:**
    ```sh
    # カレントフォルダ配下のすべての.pyファイルをプロンプトに加える
    promp out ./**/*.py
    ```
* **仕様:**
    
    .promp-template/default.txtを読み取って、.promp-out/out-XXXXXXXX.txtに出力
    
    XXXXXXXXは現在日時をyyyymmdd-hhmmss形式にする（例：out-20250927-190721.txt）
    
    出力時に、引数で指定されたファイルを読み取って{existing_files}に埋め込む
      
      埋め込み時はファイル毎に以下のようにヘッダーをつけること
        ---- ファイルパス（カレントからの相対パス）----
        ファイルの内容
    
    オプションでテンプレート名が指定された場合は、.promp-template/<テンプレート名>.txtをテンプレートとする


### 出力
LLMから出力された差分ファイルをカレントフォルダに適用する

* **コマンド:** `promp patch "差分ファイルパス"`
* **引数 (Arguments):**
    * `"差分ファイルパス"`: LLMから出力された差分ファイル。
* **オプション (Options):**
    なし
* **実行例:**
    ```sh
    # カレントフォルダにLLMから出力された差分ファイルを適用する
    promp patch patch.txt
    ```
* **仕様:**
    
    引数で指定された差分ファイルを読み取って、カレントフォルダに適用する

    差分ファイルはUnified形式を前提する

---

## 使用技術
* **環境:** uvで構築
* **言語:** python

---

## ファイルの内容

.promp-template/default.txt
```
あなたは、エクスパートプログラマーです。
以下の「既存ファイル」を参考に、下記の「ユーザーの指示」に従って、コードを作成して、説明と差分ファイル（Unified形式）を作成してください。
差分ファイルは、一発でコピーできるようにしてください。
※説明と差分ファイル中のコメントは日本語で作成してください。

==== ユーザーの指示 ====

※※ ここに指示を書いて、LLMサイトにコピペしてください。※※

==== 既存ファイル ====
{existing_files}
```

---

.promp-template/spec.txt
```
# ツール名: （ここにツール名を書く）

## このツールは何？ (目的)
* (例：指定したディレクトリ内の画像を一括でリサイズするツール)
* (例：定型文のスニペットを管理し、簡単にコピーできるようにするツール)

---

## コマンド仕様

### 基本コマンド: `(command_name) [sub_command] [arguments] --options`

---

### (機能名1)
(例：タスクを追加する)

* **コマンド:** `todo add "新しいタスク"`
* **引数 (Arguments):**
    * `"タスク内容"`: (必須) 追加したいタスクを文字列で指定。
* **オプション (Options):**
    * `-p, --priority <レベル>`: (任意) 優先度を1〜3で指定。デフォルトは2。
* **実行例:**
    ```sh
    # 優先度を指定してタスクを追加
    todo add "ドキュメントを書く" --priority 1
    ```

---

### (機能名2)
(例：タスクを一覧表示する)

* **コマンド:** `todo list`
* **引数 (Arguments):**
    * なし
* **オプション (Options):**
    * `--all`: (任意) 完了済みのタスクも全て表示する。
* **実行例:**
    ```sh
    # 未完了のタスクを一覧表示
    todo list
    ```

---

### (機能名3)
(必要に応じてセクションをコピーして追記)

---

## 使用技術
* **言語:** (例: Python, Go, Rust, Node.js)
* **主要ライブラリ:** (例: argparse, click, cobra)
